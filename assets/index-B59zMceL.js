import{A as x,H as p,l as f,m as N,n as b,q as y,t as v,j as e,T as r,o as c,S as w,B as A,_ as u,d as E,r as j,w as B,y as S,z as F,f as H,C as P,i as T,k as z,P as L,M as k}from"./index-zbGoP7mM.js";async function C(){try{const a=await x.get(p);if((a==null?void 0:a.status)===200&&(a!=null&&a.data))return a.data;throw new Error("Unexpected API response")}catch(a){throw console.error(`Error fetching roles: ${a.message||a}`),new Error("Failed to fetch roles. Please try again later.")}}async function M(a){try{console.log("hospital Add Update Form Data :",a);let s;if(a.id){const n=p+"/"+a.id;s=await x.put(n,a)}else s=await x.post(p,a);if((s==null?void 0:s.status)===200&&(s!=null&&s.data))return s.data;throw new Error("Unexpected API response")}catch(s){throw console.error(`Error fetching roles: ${s.message||s}`),new Error("Failed to fetch roles. Please try again later.")}}const $=f().shape({name:N().required("Hospital name is required.")}),q=({onClose:a,editData:s})=>{const{register:n,handleSubmit:i,formState:{errors:l},setValue:d}=b({resolver:y($),defaultValues:{id:(s==null?void 0:s.uuid)||null,name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",location:(s==null?void 0:s.location)||"",description:(s==null?void 0:s.description)||"",status:(s==null?void 0:s.status)||"Active"}}),{mutate:h,isPending:m}=v({mutationFn:o=>M(o),onSuccess:o=>{a&&a(!0),u.success(o.message)},onError:o=>{const{response:t}=o;u.error(t.data.message)}});return e.jsxs("form",{className:"flex flex-col gap-5 min-w-96",onSubmit:i(o=>h(o)),children:[e.jsxs("div",{className:"px-2 grid grid-cols-1 gap-2",children:[e.jsxs("div",{className:"col-span-1 md:col-span-3 lg:col-span-6",children:[e.jsx(r,{variant:"body2",className:"ml-1",children:"Name"}),e.jsx(c,{size:"small",placeholder:"Name",...n("name"),name:"name",error:!!(l!=null&&l.name),errorText:!!l.name&&l.name.message})]}),e.jsxs("div",{className:"col-span-1 md:col-span-3 lg:col-span-6",children:[e.jsx(r,{variant:"body2",className:"ml-1",children:"Email"}),e.jsx(c,{size:"small",placeholder:"Email",...n("email"),name:"email",error:!!(l!=null&&l.email),errorText:!!l.email&&l.email.message})]}),e.jsxs("div",{className:"col-span-1 md:col-span-3 lg:col-span-6",children:[e.jsx(r,{variant:"body2",className:"ml-1",children:"Phone number"}),e.jsx(c,{size:"small",placeholder:"Phone number",...n("phone"),name:"phone",error:!!(l!=null&&l.phone),errorText:!!l.phone&&l.phone.message})]}),e.jsxs("div",{className:"col-span-1 md:col-span-3 lg:col-span-6",children:[e.jsx(r,{variant:"body2",children:"Location"}),e.jsx(c,{size:"small",placeholder:"Location",...n("location"),name:"location",error:!!(l!=null&&l.location),errorText:!!l.location&&l.location.message})]}),e.jsxs("div",{className:"col-span-1 md:col-span-3 lg:col-span-6",children:[e.jsx(r,{variant:"body2",children:"Description"}),e.jsx(c,{size:"small",placeholder:"Description",...n("description"),name:"description",error:!!(l!=null&&l.description),errorText:!!l.description&&l.description.message})]}),e.jsxs("div",{className:"col-span-1 md:col-span-3 lg:col-span-6",children:[e.jsx(r,{variant:"body2",children:"Status"}),e.jsxs(w,{size:"small",...n("status"),defaultValue:"Active",children:[e.jsx("option",{className:"text-sm",children:"Active"}),e.jsx("option",{className:"text-sm",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"inline-flex gap-2 justify-end",children:[e.jsx("button",{className:"px-3 py-1 border border-gray-500 text-gray-600 rounded-md",type:"reset",onClick:()=>{a&&a()},children:"Close"}),e.jsx(A,{type:"submit",className:"p-2 bg-teal-700 hover:bg-teal-900 rounded-lg text-white",disabled:m,children:"Save"})]})]})},U=()=>{const a=E(),[s,n]=j.useState(!1),[i,l]=j.useState(null),{data:d,isLoading:h,refetch:m}=B({queryKey:["hospitals"],queryFn:C}),o=(t=!1)=>{n(!1),l(null),t&&m()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center pt-1",children:[e.jsxs("div",{className:"flex-1 inline-flex w-full justify-between items-center",children:[e.jsx("button",{className:"inline-flex lg:hidden p-2 rounded-full items-center gap-1 text-slate-800 bg-gray-200/35",onClick:()=>a(-1),children:e.jsx(S,{className:"text-sm"})}),e.jsx(r,{variant:"body1",className:"font-medium truncate",children:"Hospitals & clinics"}),e.jsxs("button",{className:"text-cyan-800 px-3 py-0.5 font-medium inline-flex gap-1 items-center",onClick:()=>n(!0),children:[e.jsx(F,{})," ",e.jsx(r,{variant:"body2",children:"Add"})]})]}),e.jsxs("div",{className:"inline-flex w-full sm:w-auto items-center gap-2",children:[e.jsxs("button",{className:"p-2 md:w-auto rounded-md border inline-flex gap-1 items-center",children:[e.jsx(H,{className:"text-gray-500"}),e.jsx("span",{className:"hidden sm:block text-sm font-medium text-gray-500 cursor-pointer",children:"Filter"})]}),e.jsx("input",{type:"search",className:"border rounded-md p-2 outline-none text-sm w-full sm:w-52",placeholder:"Search"})]})]}),e.jsx("hr",{}),e.jsx("div",{className:"overflow-auto",children:e.jsx(P,{style:{maxHeight:"100%"},children:e.jsxs("table",{className:"min-w-full md:max-w-full",children:[e.jsx("thead",{className:"text-sm font-normal bg-gray-200",children:e.jsxs("tr",{className:"text-left",children:[e.jsx("th",{className:"p-2 font-semibold",children:"Name"}),e.jsx("th",{className:"p-2 font-semibold",children:"Address"}),e.jsx("th",{className:"p-2 font-semibold text-center",children:"Status"}),e.jsx("th",{className:"p-2 font-semibold text-right",children:"Action"})]})}),e.jsx("tbody",{children:d==null?void 0:d.data.map((t,g)=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-2",children:e.jsx(r,{variant:"body2",children:t.name})}),e.jsx("td",{className:"p-2",children:e.jsx(r,{variant:"body2",children:t.location})}),e.jsx("td",{className:"p-2 text-center",children:e.jsx(r,{component:"span",variant:"caption",className:`${t.status==="Active"?"bg-green-500":"bg-red-500"} text-white px-1.5 py-0.5 rounded-lg`,children:t.status})}),e.jsxs("td",{className:"p-2 text-right",children:[e.jsx("button",{className:"text-slate-900 cursor-pointer p-1.5","aria-label":"Edit diagnosis",onClick:()=>{l(t),n(!0)},children:e.jsx(T,{})}),e.jsx("button",{className:"text-red-800 cursor-pointer","aria-label":"Delete diagnosis",children:e.jsx(z,{})})]})]},g))})]})})}),e.jsx("hr",{}),e.jsx(L,{})]}),e.jsx(k,{open:s,onClose:()=>n(!1),title:i?`Edit ${i.name}`:"Add Hospital",children:e.jsx(q,{onClose:o,editData:i})})]})};export{U as default};
