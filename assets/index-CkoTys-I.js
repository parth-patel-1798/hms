import{H as h,A as p,_ as i,l as N,m as b,n as v,q as _,t as y,j as e,T as r,o as t,S as w,B as A,d as B,r as g,w as P,z as S,C as H,f as E,D as F,i as C,k as T,P as z,M as k}from"./index-iENpRmtZ.js";async function I(){try{const a=await p.get(h);if((a==null?void 0:a.status)===200&&(a!=null&&a.data))return a.data;throw new Error("Unexpected API response")}catch(a){console.error(`Error fetching roles: ${a.message||a}`);const{data:s}=a.response;throw i.error(s.message),new Error("Failed to fetch Hospital. Please try again later.")}}async function M(a){try{let s;if(a.id){const n=h+"/"+a.id;s=await p.put(n,a)}else s=await p.post(h,a);if((s==null?void 0:s.status)===200&&(s!=null&&s.data))return s.data;throw new Error("Unexpected API response")}catch(s){const{data:n}=s.response;throw i.error(n.message),new Error(n.message||"Failed to Add Update Hospital API. Please try again later.")}}async function q(a){try{const s=h+"/"+a;return(await p.delete(s)).data}catch(s){const{data:n}=s.response;throw i.error(n.message),new Error(n.message||"Failed to Delete Hospital API. Please try again later.")}}const L=N().shape({name:b().required("Hospital name is required.")}),U=({onClose:a,editData:s})=>{const{register:n,handleSubmit:d,formState:{errors:l},setValue:m}=v({resolver:_(L),defaultValues:{id:(s==null?void 0:s.uuid)||null,name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",description:(s==null?void 0:s.description)||"",address_line_1:(s==null?void 0:s.address_line_1)||"",address_line_2:(s==null?void 0:s.address_line_2)||"",country:(s==null?void 0:s.country)||"",state:(s==null?void 0:s.state)||"",city:(s==null?void 0:s.city)||"",postal_code:(s==null?void 0:s.postal_code)||"",status:(s==null?void 0:s.status)||"Active"}}),{mutate:j,isPending:x}=y({mutationFn:c=>M(c),onSuccess:c=>{a&&a(!0),console.log("ok",c),i.success(c.message)},onError:c=>{const{response:u}=c;console.log(c),i.error(u.data.message)}});return e.jsxs("form",{className:"flex flex-col gap-5 min-w-96",onSubmit:d(c=>j(c)),children:[e.jsxs("div",{className:"px-2 grid grid-cols-1 sm:grid-cols-2 gap-2",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(r,{variant:"body2",className:"ml-1",children:"Name"}),e.jsx(t,{size:"small",placeholder:"Name",...n("name"),name:"name",error:!!(l!=null&&l.name),errorText:!!l.name&&l.name.message})]}),e.jsxs("div",{className:"",children:[e.jsx(r,{variant:"body2",className:"ml-1",children:"Email"}),e.jsx(t,{size:"small",placeholder:"Email",...n("email"),name:"email",error:!!(l!=null&&l.email),errorText:!!l.email&&l.email.message})]}),e.jsxs("div",{className:"",children:[e.jsx(r,{variant:"body2",className:"ml-1",children:"Phone number"}),e.jsx(t,{size:"small",placeholder:"Phone number",...n("phone"),name:"phone",error:!!(l!=null&&l.phone),errorText:!!l.phone&&l.phone.message})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(r,{variant:"body2",children:"Description"}),e.jsx(t,{size:"small",placeholder:"Description",...n("description"),name:"description",error:!!(l!=null&&l.description),errorText:!!l.description&&l.description.message})]}),e.jsxs("div",{className:"",children:[e.jsx(r,{variant:"body2",children:"Address 1"}),e.jsx(t,{size:"small",placeholder:"Address 1",...n("address_line_1"),name:"address_line_1",error:!!(l!=null&&l.address_line_1),errorText:!!l.address_line_1&&l.address_line_1.message})]}),e.jsxs("div",{className:"",children:[e.jsx(r,{variant:"body2",children:"Address 2"}),e.jsx(t,{size:"small",placeholder:"Address 2",...n("address_line_2"),name:"address_line_2",error:!!(l!=null&&l.address_line_2),errorText:!!l.address_line_2&&l.address_line_2.message})]}),e.jsxs("div",{className:"sm:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-2",children:[e.jsxs("div",{className:"",children:[e.jsx(r,{variant:"body2",children:"Country"}),e.jsx(t,{size:"small",placeholder:"Country",...n("country"),name:"country",error:!!(l!=null&&l.country),errorText:!!l.country&&l.country.message})]}),e.jsxs("div",{className:"",children:[e.jsx(r,{variant:"body2",children:"State"}),e.jsx(t,{size:"small",placeholder:"State",...n("state"),name:"state",error:!!(l!=null&&l.state),errorText:!!l.state&&l.state.message})]}),e.jsxs("div",{className:"",children:[e.jsx(r,{variant:"body2",children:"City"}),e.jsx(t,{size:"small",placeholder:"City",...n("city"),name:"city",error:!!(l!=null&&l.city),errorText:!!l.city&&l.city.message})]}),e.jsxs("div",{className:"",children:[e.jsx(r,{variant:"body2",children:"Postal Code"}),e.jsx(t,{size:"small",placeholder:"Postal Code",...n("postal_code"),name:"postal_code",error:!!(l!=null&&l.postal_code),errorText:!!l.postal_code&&l.postal_code.message})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(r,{variant:"body2",children:"Status"}),e.jsxs(w,{size:"small",...n("status"),defaultValue:"Active",children:[e.jsx("option",{className:"text-sm",children:"Active"}),e.jsx("option",{className:"text-sm",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"inline-flex gap-2 justify-end",children:[e.jsx("button",{className:"px-3 py-1 border border-gray-500 text-gray-600 rounded-md",type:"reset",onClick:()=>{a&&a()},children:"Close"}),e.jsx(A,{type:"submit",className:"p-2 bg-teal-700 hover:bg-teal-900 rounded-lg text-white",disabled:x,children:"Save"})]})]})},R=()=>{const a=B(),[s,n]=g.useState(!1),[d,l]=g.useState(null),{data:m,isLoading:j,refetch:x}=P({queryKey:["hospitals"],queryFn:I}),c=(o=!1)=>{n(!1),l(null),o&&x()},{mutate:u}=y({mutationFn:o=>q(o),onSuccess:o=>{i.success(o.message),x()}});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center pt-1",children:[e.jsxs("div",{className:"flex-1 inline-flex w-full justify-between items-center",children:[e.jsx("button",{className:"inline-flex lg:hidden p-2 rounded-full items-center gap-1 text-slate-800 bg-gray-200/35",onClick:()=>a(-1),children:e.jsx(S,{className:"text-sm"})}),e.jsx(r,{variant:"body1",className:"font-medium truncate",children:"Hospitals & clinics"}),e.jsxs("button",{className:"text-cyan-800 px-3 py-0.5 font-medium inline-flex gap-1 items-center",onClick:()=>n(!0),children:[e.jsx(H,{})," ",e.jsx(r,{variant:"body2",children:"Add"})]})]}),e.jsxs("div",{className:"inline-flex w-full sm:w-auto items-center gap-2",children:[e.jsxs("button",{className:"p-2 md:w-auto rounded-md border inline-flex gap-1 items-center",children:[e.jsx(E,{className:"text-gray-500"}),e.jsx("span",{className:"hidden sm:block text-sm font-medium text-gray-500 cursor-pointer",children:"Filter"})]}),e.jsx("input",{type:"search",className:"border rounded-md p-2 outline-none text-sm w-full sm:w-52",placeholder:"Search"})]})]}),e.jsx("hr",{}),e.jsx("div",{className:"overflow-auto",children:e.jsx(F,{style:{maxHeight:"100%"},children:e.jsxs("table",{className:"min-w-full md:max-w-full",children:[e.jsx("thead",{className:"text-sm font-normal bg-gray-200",children:e.jsxs("tr",{className:"text-left",children:[e.jsx("th",{className:"p-2 font-semibold",children:"Name"}),e.jsx("th",{className:"p-2 font-semibold",children:"Address"}),e.jsx("th",{className:"p-2 font-semibold text-center",children:"Status"}),e.jsx("th",{className:"p-2 font-semibold text-right",children:"Action"})]})}),e.jsx("tbody",{children:m==null?void 0:m.data.map((o,f)=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-2",children:e.jsx(r,{variant:"body2",children:o.name})}),e.jsx("td",{className:"p-2",children:e.jsxs(r,{variant:"body2",children:[o.address_line_1,", ",o.city," ",o.postal_code]})}),e.jsx("td",{className:"p-2 text-center",children:e.jsx(r,{component:"span",variant:"caption",className:`${o.status==="Active"?"bg-green-500":"bg-red-500"} text-white px-1.5 py-0.5 rounded-lg`,children:o.status})}),e.jsxs("td",{className:"p-2 text-right",children:[e.jsx("button",{className:"text-slate-900 cursor-pointer p-1.5","aria-label":"Edit diagnosis",onClick:()=>{l(o),n(!0)},children:e.jsx(C,{})}),e.jsx("button",{className:"text-red-800 cursor-pointer","aria-label":"Delete diagnosis",onClick:()=>{console.log("id",o.uuid),u(o.uuid)},children:e.jsx(T,{})})]})]},f))})]})})}),e.jsx("hr",{}),e.jsx(z,{})]}),e.jsx(k,{open:s,onClose:()=>n(!1),title:d?`Edit ${d.name}`:"Add Hospital",children:e.jsx(U,{onClose:c,editData:d})})]})};export{R as default};
